--- nginx.conf.orig	2017-05-24 08:28:35.251955637 +0000
+++ nginx.conf	2017-05-24 08:30:12.564768334 +0000
@@ -29,6 +29,7 @@
 
     #keepalive_timeout  0;
     keepalive_timeout  65;
+    push_stream_shared_memory_size 32M;
 
     #gzip  on;
 
@@ -54,6 +55,32 @@
             root   html;
         }
 
+
+  location /pub {
+    push_stream_publisher admin;
+    push_stream_channels_path               $arg_id;
+    allow all;
+  }
+
+  location ~ /sub/(.*) {
+    push_stream_subscriber;
+    push_stream_channels_path                   $1;
+    push_stream_message_template                "{\"id\":~id~,\"channel\":\"~channel~\",\"text\":~text~, \"time\":\"~time~\", \"eventid\":\"~event-id~\"}";
+
+  }
+
+  location ~ /ws/(.*) {
+    push_stream_subscriber websocket;
+    push_stream_channels_path                   $1;
+    push_stream_message_template                "{\"id\":~id~,\"channel\":\"~channel~\",\"text\":~text~, \"time\":\"~time~\", \"eventid\":\"~event-id~\"}";
+
+  }
+  location ~ /ev/(.*) {
+    push_stream_subscriber                      eventsource;
+    push_stream_channels_path                   $1;
+    push_stream_message_template                "{\"id\":~id~,\"channel\":\"~channel~\",\"text\":~text~}";
+  }
+
         # proxy the PHP scripts to Apache listening on 127.0.0.1:80
         #
         #location ~ \.php$ {

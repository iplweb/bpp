{% load humanize %}

<div class="callout ewaluacja-optymalizacja__summary-callout">
    <h5 class="ewaluacja-optymalizacja__summary-title">
        <span class="fi-graph-bar"></span> Podsumowanie punktacji dyscyplin
    </h5>

    <div class="ewaluacja-optymalizacja__summary-scroll">
        <table class="ewaluacja-optymalizacja__summary-table">
            <thead>
                <tr>
                    {% for d in discipline_summary.disciplines %}
                    <th class="ewaluacja-optymalizacja__summary-header">
                        {{ d.dyscyplina.nazwa|truncatechars:30 }}
                    </th>
                    {% endfor %}
                    <th class="ewaluacja-optymalizacja__summary-header--total">
                        RAZEM
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    {% for d in discipline_summary.disciplines %}
                    <td class="ewaluacja-optymalizacja__summary-cell">
                        <strong>{{ d.punkty|floatformat:2 }}</strong>
                        {% if d.has_diff and d.diff != 0 %}
                        <br>
                        <small class="{% if d.diff > 0 %}ewaluacja-optymalizacja__diff--positive{% else %}ewaluacja-optymalizacja__diff--negative{% endif %}">
                            {% if d.diff > 0 %}+{% endif %}{{ d.diff|floatformat:2 }}
                        </small>
                        {% endif %}
                    </td>
                    {% endfor %}
                    <td class="ewaluacja-optymalizacja__summary-cell--total">
                        {{ discipline_summary.total_points|floatformat:2 }}
                        {% if discipline_summary.has_diff and discipline_summary.total_diff != 0 %}
                        <br>
                        <small class="{% if discipline_summary.total_diff > 0 %}ewaluacja-optymalizacja__diff--positive{% else %}ewaluacja-optymalizacja__diff--negative{% endif %}">
                            {% if discipline_summary.total_diff > 0 %}+{% endif %}{{ discipline_summary.total_diff|floatformat:2 }}
                        </small>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    {% for d in discipline_summary.disciplines %}
                    <td class="ewaluacja-optymalizacja__summary-cell--slots">
                        {{ d.slots|floatformat:2 }} slot.
                    </td>
                    {% endfor %}
                    <td class="ewaluacja-optymalizacja__summary-cell--slots-total">
                        {{ discipline_summary.total_slots|floatformat:2 }} slot.
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

{% extends "base.html" %}

{% load columns %}

{% block breadcrumbs %}
    {{ block.super }}
    <li class="current">Przeglądaj wg roku</li>
{% endblock %}

{% block extratitle %}
    Przeglądaj publikacje według roku
{% endblock %}

{% block content %}
    <!-- SEO-friendly structured data for crawlers -->
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "CollectionPage",
      "name": "Publikacje według roku",
      "description": "Przeglądaj publikacje naukowe według roku wydania",
      "url": "{{ request.build_absolute_uri }}",
      "numberOfItems": "{{ total_publications }}"
    }
    </script>

    <!-- Modern Header Section -->
    <div class="modern-header">
        <div class="grid-x grid-margin-x align-middle">
            <div class="cell auto">
                <h1>
                    <i class="fi-calendar"></i> Przeglądaj publikacje według roku
                </h1>
                <p class="lata__subtitle">
                    Łączna liczba publikacji w bazie: {{ total_publications }}
                </p>
            </div>
        </div>
    </div>

    <!-- Years by Decade -->
    {% if decades %}
        {% for decade, years_in_decade in decades.items %}
            <div class="lata__decade-section">
                <h2 class="lata__decade-heading">
                    <i class="fi-folder"></i> Lata {{ decade }}-{% with first_year=years_in_decade|first last_year=years_in_decade|last %}{% if first_year.year > decade|add:9 %}{{ decade|add:9 }}{% else %}{{ first_year.year }}{% endif %}{% endwith %}
                </h2>

                <div class="grid-x grid-margin-x">
                    {% for year_data in years_in_decade %}
                        <div class="large-2 medium-3 small-6 cell lata__year-cell">
                            <a href="{% url 'bpp:browse_rok' year_data.year %}"
                               class="lata__year-card">
                                <div class="lata__year-number">
                                    {{ year_data.year }}
                                </div>
                                <div class="lata__year-count">
                                    {{ year_data.count }}
                                    {% if year_data.count == 1 %}publikacja
                                    {% elif year_data.count < 5 %}publikacje
                                    {% else %}publikacji{% endif %}
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="callout warning lata__empty-callout">
            <h4 class="lata__empty-heading">
                <i class="fi-alert lata__empty-icon"></i>Brak publikacji
            </h4>
            <p class="lata__empty-message">
                Nie znaleziono publikacji w bazie danych.
            </p>
            <a href="{% url "multiseek:index" %}" class="button lata__empty-btn">
                <i class="fi-magnifying-glass lata__btn-icon"></i>Przejdź do wyszukiwarki
            </a>
        </div>
    {% endif %}

    <!-- SEO Content -->
    <div class="lata__seo-section">
        <h2 class="lata__seo-heading">O przeglądaniu według roku</h2>
        <p class="lata__seo-text">
            Przeglądaj publikacje naukowe według roku wydania. Każdy rok zawiera pełną listę publikacji
            z możliwością sortowania i filtrowania według typu publikacji. System umożliwia łatwe
            nawigowanie między latami oraz dostęp do szczegółowych informacji bibliograficznych.
        </p>
        <p class="lata__seo-text">
            Dane są automatycznie aktualizowane i zawierają wszystkie typy publikacji: artykuły naukowe,
            książki, rozdziały, patenty oraz inne formy dorobku naukowego pracowników uczelni.
        </p>
    </div>

{% endblock %}

{% if page_obj %}
<table class="stack">
    <thead>
        <tr>
            <th>ID</th>
            <th>Typ</th>
            <th>Tytul</th>
            <th>Rok</th>
            <th>PBN UID</th>
            <th>Oświadczeń</th>
            <th>Przypiętych</th>
        </tr>
    </thead>
    <tbody>
        {% for publication in page_obj %}
        <tr>
            <td>{{ publication.pk }}</td>
            <td>
                {% if publication|slice:":20" == "wydawnictwo_ciagle" %}
                <span class="label secondary">Ciagle</span>
                {% else %}
                <span class="label">Zwarte</span>
                {% endif %}
            </td>
            <td>
                <a href="{{ publication.get_absolute_url }}" target="_blank">
                    {{ publication.tytul_oryginalny|truncatechars:80 }}
                </a>
            </td>
            <td>{{ publication.rok }}</td>
            <td>
                {% if publication.pbn_uid_id %}
                <code class="small">{{ publication.pbn_uid_id }}</code>
                {% else %}
                <span class="text-muted">-</span>
                {% endif %}
            </td>
            <td>{{ publication.liczba_oswiadczen }}</td>
            <td>{{ publication.liczba_przypietych }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="7" class="text-center text-muted">
                Brak publikacji spelniajacych kryteria.
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if page_obj.has_other_pages %}
<style>
    /* Modern pagination styling */
    .pagination {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 0.75rem 1rem;
        margin: 1.5rem 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        display: flex !important;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
    }

    .pagination li {
        margin: 0;
    }

    .pagination li a,
    .pagination li span {
        background: #fff;
        border: 1px solid #dee2e6;
        border-radius: 6px;
        padding: 0.5rem 0.75rem;
        margin: 0 0.25rem;
        font-weight: 500;
        transition: all 0.2s ease;
        text-decoration: none;
        color: #007bff;
        cursor: pointer;
    }

    .pagination li a:hover {
        background: #007bff;
        color: #fff;
        border-color: #007bff;
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0,123,255,0.3);
    }

    .pagination li.current a,
    .pagination li.current span {
        background: #007bff;
        color: #fff;
        border-color: #007bff;
        font-weight: 600;
    }

    .pagination li.disabled a,
    .pagination li.disabled span {
        background: #e9ecef;
        color: #6c757d;
        border-color: #dee2e6;
        cursor: not-allowed;
    }

    .pagination li.ellipsis span {
        background: transparent;
        border: none;
        color: #6c757d;
        padding: 0 0.5rem;
    }

    .pagination .pagination-previous a,
    .pagination .pagination-next a {
        background: #28a745;
        color: #fff;
        border-color: #28a745;
        font-weight: 600;
    }

    .pagination .pagination-previous a:hover,
    .pagination .pagination-next a:hover {
        background: #218838;
        border-color: #218838;
    }

    .pagination .pagination-previous.disabled a,
    .pagination .pagination-next.disabled a,
    .pagination .pagination-previous.disabled span,
    .pagination .pagination-next.disabled span {
        background: #e9ecef;
        color: #6c757d;
        border-color: #dee2e6;
    }
</style>
<ul class="pagination" role="navigation" aria-label="Pagination">
    {% if page_obj.has_previous %}
        <li class="pagination-previous"><a hx-get="{% url 'pbn_wysylka_oswiadczen:publications' %}?rok_od={{ rok_od }}&rok_do={{ rok_do }}&tytul={{ tytul|urlencode }}&page={{ page_obj.previous_page_number }}" hx-target="#publication-list" hx-swap="innerHTML">poprzednia</a></li>
    {% else %}
        <li class="pagination-previous disabled"><span>poprzednia</span></li>
    {% endif %}

    {% if page_obj.number >= 5 %}
        <li><a hx-get="{% url 'pbn_wysylka_oswiadczen:publications' %}?rok_od={{ rok_od }}&rok_do={{ rok_do }}&tytul={{ tytul|urlencode }}&page=1" hx-target="#publication-list" hx-swap="innerHTML">1</a></li>
        <li class="ellipsis"><span>...</span></li>
    {% elif page_obj.number == 4 %}
        <li><a hx-get="{% url 'pbn_wysylka_oswiadczen:publications' %}?rok_od={{ rok_od }}&rok_do={{ rok_do }}&tytul={{ tytul|urlencode }}&page=1" hx-target="#publication-list" hx-swap="innerHTML">1</a></li>
    {% endif %}
    {% if page_obj.number|add:"-2" >= 1 %}
        <li><a hx-get="{% url 'pbn_wysylka_oswiadczen:publications' %}?rok_od={{ rok_od }}&rok_do={{ rok_do }}&tytul={{ tytul|urlencode }}&page={{ page_obj.number|add:"-2" }}" hx-target="#publication-list" hx-swap="innerHTML">{{ page_obj.number|add:"-2" }}</a></li>
    {% endif %}
    {% if page_obj.number|add:"-1" >= 1 %}
        <li><a hx-get="{% url 'pbn_wysylka_oswiadczen:publications' %}?rok_od={{ rok_od }}&rok_do={{ rok_do }}&tytul={{ tytul|urlencode }}&page={{ page_obj.number|add:"-1" }}" hx-target="#publication-list" hx-swap="innerHTML">{{ page_obj.number|add:"-1" }}</a></li>
    {% endif %}
    <li class="current"><span>{{ page_obj.number }}</span></li>
    {% if page_obj.number|add:"1" <= page_obj.paginator.num_pages %}
        <li><a hx-get="{% url 'pbn_wysylka_oswiadczen:publications' %}?rok_od={{ rok_od }}&rok_do={{ rok_do }}&tytul={{ tytul|urlencode }}&page={{ page_obj.number|add:"1" }}" hx-target="#publication-list" hx-swap="innerHTML">{{ page_obj.number|add:"1" }}</a></li>
    {% endif %}
    {% if page_obj.number|add:"2" <= page_obj.paginator.num_pages %}
        <li><a hx-get="{% url 'pbn_wysylka_oswiadczen:publications' %}?rok_od={{ rok_od }}&rok_do={{ rok_do }}&tytul={{ tytul|urlencode }}&page={{ page_obj.number|add:"2" }}" hx-target="#publication-list" hx-swap="innerHTML">{{ page_obj.number|add:"2" }}</a></li>
    {% endif %}
    {% if page_obj.number|add:"2" <= page_obj.paginator.num_pages|add:"-2" %}
        <li class="ellipsis"><span>...</span></li>
        <li><a hx-get="{% url 'pbn_wysylka_oswiadczen:publications' %}?rok_od={{ rok_od }}&rok_do={{ rok_do }}&tytul={{ tytul|urlencode }}&page={{ page_obj.paginator.num_pages }}" hx-target="#publication-list" hx-swap="innerHTML">{{ page_obj.paginator.num_pages }}</a></li>
    {% elif page_obj.number|add:"1" <= page_obj.paginator.num_pages|add:"-2" %}
        <li><a hx-get="{% url 'pbn_wysylka_oswiadczen:publications' %}?rok_od={{ rok_od }}&rok_do={{ rok_do }}&tytul={{ tytul|urlencode }}&page={{ page_obj.paginator.num_pages }}" hx-target="#publication-list" hx-swap="innerHTML">{{ page_obj.paginator.num_pages }}</a></li>
    {% endif %}

    {% if page_obj.has_next %}
        <li class="pagination-next"><a hx-get="{% url 'pbn_wysylka_oswiadczen:publications' %}?rok_od={{ rok_od }}&rok_do={{ rok_do }}&tytul={{ tytul|urlencode }}&page={{ page_obj.next_page_number }}" hx-target="#publication-list" hx-swap="innerHTML">następna</a></li>
    {% else %}
        <li class="pagination-next disabled"><span>następna</span></li>
    {% endif %}
</ul>
{% endif %}

{% else %}
<div class="callout secondary text-center">
    <span class="fi-info"></span> Brak publikacji do wyswietlenia.
</div>
{% endif %}

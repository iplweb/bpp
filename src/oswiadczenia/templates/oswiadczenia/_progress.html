{% if task.status == "pending" %}
    <div class="callout warning">
        <h4><span class="fi-clock"></span> Oczekuje na uruchomienie...</h4>
        <p>Zadanie zostalo dodane do kolejki i wkrotce zostanie uruchomione.</p>
    </div>
{% elif task.status == "running" %}
    <div class="callout warning">
        <h4><span class="fi-loop"></span> Trwa generowanie...</h4>
        <div class="progress large" role="progressbar" aria-valuemin="0" aria-valuemax="100"
             aria-valuenow="{{ task.progress_percent }}">
            <div class="progress-meter" style="width: {{ task.progress_percent }}%">
                <p class="progress-meter-text">{{ task.progress_percent }}%</p>
            </div>
        </div>
        <p><strong>Postep:</strong> {{ task.processed_items }} / {{ task.total_items }}</p>
        {% if task.current_item %}
            <p><strong>Aktualnie:</strong> {{ task.current_item }}</p>
        {% endif %}
    </div>
{% elif task.status == "completed" %}
    <div class="callout success">
        <h4><span class="fi-check"></span> Zakonczono!</h4>
        {% if task.result_file %}
            <p>Plik ZIP zostal wygenerowany pomyslnie.</p>
            <p><strong>Przetworzono:</strong> {{ task.processed_items }} oswiadczen</p>
            <a href="{% url 'oswiadczenia:download-result' task.pk %}" class="button success large">
                <span class="fi-download"></span> Pobierz plik ZIP
            </a>
        {% else %}
            <p>{{ task.error_message }}</p>
        {% endif %}
    </div>
{% elif task.status == "failed" %}
    <div class="callout alert">
        <h4><span class="fi-x"></span> Blad!</h4>
        <p>Wystapil blad podczas generowania plikow:</p>
        <pre>{{ task.error_message }}</pre>
    </div>
{% endif %}

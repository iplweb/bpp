<!doctype html>
{% load static %}
{% load compress %}
<html lang="pl">
<head>
    <meta charset="utf-8"/>
    <title>Mapa znak√≥w - greka, cyrylica, inne</title>
    {% compress css %}
    <link rel="stylesheet" href="{% static 'jqueryui/themes/redmond/jquery-ui.min.css' %}"/>
    {% endcompress %}
    {% compress js %}
        <script src="{% static 'jquery/dist/jquery.min.js' %}"></script>
        <script src="{% static 'jqueryui/jquery-ui.min.js' %}"></script>
    {% endcompress %}

    <script>
        $(function () {
            $("#accordion").accordion({
                active: {{ active }},
                fillSpace: true
            });

            $("#button").button({});

        });

        var timerID = 0;

        function closeMe() {
            window.close();
        }

        function updateTimer(c) {
            if (timerID) {
                clearTimeout(timerID);
                timerID = 0;
            }

            if (c != 0)
                timerID = setTimeout(closeMe, c);
        }

        function setZoom(evt) {
            $("#zoom").html(evt.currentTarget.innerHTML);
        }

        function clicked(evt) {
            field = opener.window.jQuery("#{{ fieldId }}");
            field.val(field.val() + evt.currentTarget.innerHTML);
            updateTimer(3000);
        }

        function clearZoom() {
            $("#zoom").innerHTML = 'x';
        }

        function saveHeader(evt) {
            c = evt.currentTarget.textContent;
            if (c == "Greka")
                a = 0;
            if (c == "Cyrylica")
                a = 1;
            if (c == "ISO")
                a = 2;

            $.get("/bpp/charmap/set/", {active_tab: a});
        }

        $(function () {
            e = $(".char");
            for (a = 0; a < e.length; a++) {
                e[a].onmouseover = setZoom;
                e[a].onmouseout = clearZoom;
                e[a].onclick = clicked;
            }

            e = $("#accordion h3");
            for (a = 0; a < e.length; a++) {
                e[a].onclick = saveHeader;
            }
        });
    </script>
    <style>
        .char {
            font-size: 1em;
            width: 24px;
            height: 24px;
            display: block;
            float: left;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            border-radius: 3px;
        }

        .char:hover {
            background: #e0e0e0;
        }

        #zoom {
            font-size: 3em;
            border-radius: 0.1em;
            background: silver;
            float: left;
            padding: 10px;
            width: 1.5em;
            height: 1.5em;
            margin-left: 0.2em;
            text-align: center;
        }

        #accordion {
            float: left;
        }

        #accordion h3, #button {
            font-size: 0.6em
        }

        #container {
            height: 520px;
            width: 450px;
            float: left;
        }
    </style>
</head>
<body>

<div id="container">
    <div id="accordion">
        <h3>Greka</h3>

        <div>
            <p>
                {% for element in charmap_greek %}
                    <span class="char">&#x{{ element }};</span>
                {% endfor %}
            </p>
        </div>
        <h3>Cyrylica</h3>

        <div>
            <p>
                {% for element in charmap_cyrylic %}
                    <span class="char">&#x{{ element }};</span>
                {% endfor %}
            </p>
        </div>
        <h3>ISO</h3>

        <div>
            <p>
                {% for element in charmap_iso %}
                    <span class="char">&#x{{ element }};</span>
                {% endfor %}
            </p>
        </div>
    </div>
</div>

<div id="zoom">
    X
</div>

<button style="float: left; position: relative; top:20px;left:20px;" id="button"
        onclick="window.close();">
    Zamknij
</button>

</body>
</html>